<navbar></navbar>
<section class="main-section">
    <div class="row">
        <h2>Contact Me</h2>
        <h3 id="successmessage" style="display:none; font-size:0.8rem" class="success label">Your Message Has Been Successfully Submitted. Thanks.<br/><br/></h3>
        <form id="contactForm" data-abide action="" method="POST" target="no-target">
            <div class="name-field">
                <label>Your name <small>required</small>
                    <input id="name" type="text" required pattern="[a-zA-Z]+" placeholder="Full Name">
                </label>
                <small class="error">Name is required and must be a string.</small>
            </div>
            <div class="email-field">
                <label>Email <small>required</small>
                    <input id="email" type="email" required placeholder="Email Address">
                </label>
                <small class="error">A valid email address is required.</small>
            </div>
            <div class="phone-field columns medium-6">
                <label>Phone <small>required</small>
                    <input id="phone" type="text" required placeholder="Phone Number" maxLength="12">
                </label>
                <small class="error">A valid phone number is required.</small>
            </div>
            <div class="contact-field columns medium-6">
                <label>Preferred Contact Method <small>required</small>
                    <select id="prefContact" type="range" required placeholder="Select a Contact">
                        <option value=""></option>
                        <option value="Email">Email</option>
                        <option value="Phone">Phone</option>
                    </select>
                </label>
                <small class="error">Please select a contact method.</small>
            </div>
            <div class="textarea-field">
                <label>Your Message <small>required</small>
                    <textarea id="message" rows="8" type="text" required pattern="[a-zA-Z]+" placeholder="Your Message" style="resize:none"></textarea>
                </label>
                <small class="error">Please enter your message.</small>
            </div>
            <button id="form-submit" type="submit">Submit</button>
        </form>
        <iframe id="no-target" name="no-target" style="display:none"></iframe>
    </div>
    <footer></footer>
    <script>
    $(document).foundation();
    $('#contactForm')
        .on('invalid.fndtn.abide', function() {
            var invalid_fields = $(this).find('[data-invalid]');
            console.log(invalid_fields);
            document.getElementById('successmessage').style.display = 'none'
        })
        .on('valid.fndtn.abide', function() {
            console.log('valid!');
            var name = encodeURIComponent($('#name').val());
            var email = encodeURIComponent($('#email').val());
            var phone = encodeURIComponent($('#phone').val());
            var prefContact = encodeURIComponent($('#prefContact').val());
            var message = encodeURIComponent($('#message').val());

            var g_name = "entry.2955400";
            var g_email = "entry.2362106";
            var g_phone = "entry.2539523";
            var g_prefContact = "entry.2135751";
            var g_message = "entry.2814641";

            var baseURL = 'https://docs.google.com/forms/d/19AmhIgnuI42IEcP6CAWdxwl9vrsZbax3nBfU47Cf15o/formResponse?';
            var submitRef = '&submit=Submit';
            var submitURL = (baseURL + g_name + "=" + name + "&" + g_email + "=" + email + "&" + g_phone + "=" + phone + "&" + g_prefContact + "=" + prefContact + "&" + g_message + "=" + message +
                submitRef);
            console.log(submitURL);

            $(this)[0].action = submitURL;
            $('[required]').attr('required', false);
            // Reset form abide validation
            document.getElementById('contactForm').reset();
            // Clear the error classes on divs and labels
            //$('#contactForm').children('div').removeClass('error');
            //$('#contactForm').children('label').removeClass('error');
            document.getElementById('successmessage').style.display = 'inline-block'
        });
    </script>
</section>